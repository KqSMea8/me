define("page/driver_register_edition/first/first.js",function(e,a){function n(e){return"string"!=typeof e&&(e=e.getAttribute("name")),1==pageParams.filed_list[e].changeable}function r(e){return"string"!=typeof e&&(e=e.getAttribute("name")),3==pageParams.filed_list[e].verify}function t(e,a){a=a||e.attr("name"),e.val(pageParams.filed_list[a]&&pageParams.filed_list[a].value||u.get(a)).attr("disabled",n(a)?null:"")}function i(){var e=_.find("#txt_licence"),i=_.find("#txt_realname");t(i),t(e),i.on("blur",function(){var e=_.find("#txt_realname").val();s.regular.is_Chinese_name(e)===!1?(s.warning("请填写正确的中文姓名"),s.warning_text(i)):u.save_cache(this.getAttribute("name"),e),l()}),e.on("blur",function(){var a=_.find("#txt_licence").val();s.regular.is_ID_card(a)===!1?(s.warning("请填写正确的身份证号码"),s.warning_text(e)):u.save_cache(this.getAttribute("name"),a),l()});var c=e.attr("name");r(c)&&n(c)&&_.addClass("verify_failed"),_.find(".next_btn").on("click",function(){var e=a.check_filed();if(0!=e){var n=dd.dialog,r=dd.base,t=$.extend({step:1,token:pageParams.upload_data.token},e);s.showLoading(),$.ajax({method:"GET",url:pageParams.reg_url,data:t,success:function(e){var a=r.txtToJson(e);if("102"==a.errno)location.replace(pageParams.gologinurl);else if("0"==a.errno)u.clean(),o();else{if("3002"!=a.errno)return"6010"==a.errno?void n.confirm({title:"",text:"车辆已被注册。如果不是你本人或熟人操作，你可以通过申诉来进行车主认证。",confirm:{val:"我要申诉",handler:function(){location.replace(pageParams.faq_url)}}}):n.alert(a.errmsg);u.clean(),o()}s.closeLoading()},error:function(){n.alert("网络有点不给力，请稍后再试哦~")}})}})}function l(){for(var e=0;e<g.length;e++)if(s.regular[v[e]](g[e].value)===!1)return _.trigger("is_full_fill",!1),!1;_.trigger("is_full_fill",!0)}var c,o,s=e("page/driver_register_edition/tool.js"),f=dd.dialog,u=s.localCache.instance("driver_register_first"),d=!1,_=a.$container=$(".form_first");a.wakeup=function(e,a,n){o=function(){s.warning.close(),a()},c=function(){s.warning.close(),n()},d===!1&&(d=!0,i(),l())},a.check_filed=function(){var e=_.find("#txt_realname").val(),a=_.find("#txt_licence").val();if(s.regular.is_Chinese_name(e)===!1)return f.alert({title:"",tip:"请填写正确的中文姓名",btn:{handler:function(){}}}),!1;if(s.regular.is_ID_card(a)===!1)return f.alert({title:"",tip:"请填写正确的身份证号码",btn:{handler:function(){}}}),!1;var n={drivelicensename:txt_realname.value,drivelicensenumber:txt_licence.value.toLocaleUpperCase()};return n};var g=[txt_realname,txt_licence],v=["is_Chinese_name","is_ID_card"]});