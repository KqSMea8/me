define("page/driver_register_edition/first/first.js",function(e,a){function t(e){return"string"!=typeof e&&(e=e.getAttribute("name")),1==pageParams.filed_list[e].changeable}function n(e){return"string"!=typeof e&&(e=e.getAttribute("name")),3==pageParams.filed_list[e].verify}function r(e,a){a=a||e.attr("name"),e.val(pageParams.filed_list[a]&&pageParams.filed_list[a].value||u.get(a)).attr("disabled",t(a)?null:"")}function i(){var e=d.find("#txt_licence"),i=d.find("#txt_realname");r(i),r(e),i.on("blur",function(){var e=d.find("#txt_realname").val();s.regular.is_Chinese_name(e)===!1?(s.warning("请填写正确的中文姓名"),s.warning_text(i)):u.save_cache(this.getAttribute("name"),e),l()}),e.on("blur",function(){var a=d.find("#txt_licence").val();s.regular.is_ID_card(a)===!1?(s.warning("请填写正确的身份证号码"),s.warning_text(e)):u.save_cache(this.getAttribute("name"),a),l()});var c=i.attr("name");n(c)&&t(c)&&d.addClass("verify_failed"),d.find(".next_btn").on("click",function(){var e=a.check_filed();if(0!=e){var t=dd.dialog,n=dd.base,r=$.extend({step:1,token:pageParams.upload_data.token},e);s.showLoading(),$.ajax({type:"GET",url:pageParams.reg_url,data:r,success:function(e){var a=n.txtToJson(e);if("102"==a.errno)location.replace(pageParams.gologinurl);else if("0"==a.errno)u.clean(),o();else{if("3002"!=a.errno)return"6010"==a.errno?void t.confirm({title:"",text:"车辆已被注册。如果不是你本人或熟人操作，你可以通过申诉来进行车主认证。",confirm:{val:"我要申诉",handler:function(){location.replace(pageParams.faq_url)}}}):t.alert(a.errmsg||"");u.clean(),o()}s.closeLoading()},error:function(){t.alert("网络有点不给力，请稍后再试哦~")}})}}),d.one("touchstart",function(){d.removeClass("verify_failed")})}function l(){for(var e=0;e<g.length;e++)if(s.regular[v[e]](g[e].value)===!1)return d.trigger("is_full_fill",!1),!1;d.trigger("is_full_fill",!0)}var c,o,s=e("page/driver_register_edition/tool.js"),f=dd.dialog,u=s.localCache.instance("driver_register_first"),_=!1,d=a.$container=$(".form_first");a.wakeup=function(e,a,t){o=function(){s.warning.close(),a()},c=function(){s.warning.close(),t()},_===!1&&(_=!0,i(),l())},a.check_filed=function(){var e=d.find("#txt_realname").val(),a=d.find("#txt_licence").val();if(s.regular.is_Chinese_name(e)===!1)return f.alert({title:"",tip:"请填写正确的中文姓名",btn:{handler:function(){}}}),!1;if(s.regular.is_ID_card(a)===!1)return f.alert({title:"",tip:"请填写正确的身份证号码",btn:{handler:function(){}}}),!1;var t={drivelicensename:txt_realname.value,drivelicensenumber:txt_licence.value.toLocaleUpperCase()};return t};var g=[txt_realname,txt_licence],v=["is_Chinese_name","is_ID_card"]});