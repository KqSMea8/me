define("page/driver_register_edition/third/third.js",function(a,e){function t(a){v.find(".poster img").attr("src",a),_.save_cache(v.find(".poster").attr("name"),a)}function r(){var a=document.getElementById("carnoSelect"),e=dd.base;ulEl=a.getElementsByClassName("options")[0];var t=function(){e.ajax({method:"POST",url:"/pinche/cartype/getlicensehead",succFunc:function(t){var r=e.txtToJson(t),n=txt_carone.getAttribute("name"),c=pageParams.filed_list[n].value||_.get(n)||"1",o=r.data[c];if(txt_carone.value=o||_.get(n+"_zh"),!i(txt_carone))return void txt_carone.setAttribute("disabled","");if("0"==r.errno){for(var d=r.data,l=r.sort,u="",f=0,g=l.length;g>f;f++)u+='<li data-id="'+l[f]+'" data-show="'+d[l[f]]+'">'+d[l[f]]+"</li>";ulEl.innerHTML+=u,s(txt_carone,a,[])}},failFunc:function(){}})};t()}function i(a){return"string"!=typeof a&&(a=a.getAttribute("name")),1==pageParams.filed_list[a].changeable}function n(a){return"string"!=typeof a&&(a=a.getAttribute("name")),3==pageParams.filed_list[a].verify}function c(){n(h[0])&&i(h[0])&&v.addClass("verify_failed");var c=v.find(".poster").attr("name"),s=pageParams.filed_list[c].value||_.get(c);t(s);var u=v.find("#car_type");h.forEach(function(a){u.attr("data-"+a,pageParams.filed_list[a].value||_.get(a))}),u.val(pageParams.filed_list[h[0]].zhvalue+pageParams.filed_list[h[1]].zhvalue+pageParams.filed_list[h[2]].zhvalue||_.get(h[0]+"_zh"));var g=v.find("#txt_carnumber"),p=g.attr("name");g.val(pageParams.filed_list[p].value||_.get(p)).attr("disabled",i(p)?null:"");var m=v.find("#txt_carone");p=m.attr("name"),m.attr("data-id",pageParams.filed_list[p].value||_.get(p)||"1"),r();var b=car_type.getAttribute("name").split(",")[0];if(i(b)){var x=v.find("#car_type").on("click",function(e){var t=this;e.preventDefault(),e.stopPropagation(),a("carchoose/main.js"),$.didiCarChoose({brandsURL:pageParams.getcarbrand,typesURL:pageParams.getcartype,colorsURL:pageParams.getcolor,onselect:function(a){t.value=a.carInfo;$.each(a.value,function(e,r){var i;switch(e){case"color":i=h[2];break;case"brand":i=h[0];break;case"type":i=h[1]}t.setAttribute("data-"+i,r.id),_.save_cache(i,r.id),_.save_cache(i+"_zh",a.carInfo)})}})});x.on("focus",function(){x.blur()})}else car_type.setAttribute("disabled","");v.find(".next_btn").on("click",function(){var a=e.check_filed();if(0!=a){var t=dd.dialog,r=dd.base;f.showLoading(),$.ajax({method:"GET",url:pageParams.reg_url,data:$.extend({step:3,token:pageParams.upload_data.token},a),success:function(a){var e=r.txtToJson(a);if("102"==e.errno)location.replace(pageParams.gologinurl);else if("0"==e.errno)_.clean(),d();else{if("3002"!=e.errno)return t.alert(e.errmsg);_.clean(),d()}f.closeLoading()},error:function(){t.alert("网络有点不给力，请稍后再试哦~")}}),$.ajax({method:"GET",dataType:"jsonp",url:pageParams.inviteurl,data:{plate:txt_carone.value+a.carcardnumber}})}}),v.find(".previous_btn").on("click",function(){l()}),v.find("#txt_carone").on("change",function(){_.save_cache(this.getAttribute("name"),this.getAttribute("data-id")),_.save_cache(this.getAttribute("name")+"_zh",this.value)}),v.find("#txt_carnumber").on("blur",function(){f.regular.is_carNo(this.value)===!1?(f.warning("请填写正确的"+this.getAttribute("placeholder")),f.warning_text(v.find("#txt_carnumber"))):_.save_cache(this.name,this.value),o()},!1)}function o(){for(var a=0;a<m.length;a++)if(0==("string"==typeof b[a]?m[a].getAttribute(b[a]):b[a]()))return void v.trigger("is_full_fill",!1);v.trigger("is_full_fill",!0)}var d,l,s=a("page/driver_register_edition/third/select.js"),u=!1,f=a("page/driver_register_edition/tool.js"),g=dd.dialog,_=f.localCache.instance("driver_register_third"),v=e.$container=$(".form_third");e.wakeup=function(a,e,r){d=function(){f.warning.close(),e()},l=function(){f.warning.close(),r()},a.travelauthpicurl&&t(a.travelauthpicurl),u===!1&&(u=!0,c(),o())};var p={carprovinceid:"车省号",carcardnumber:"车牌号",carbrandid:"品牌号",cartypeid:"车型号",carcolorid:"车颜色"},h=["carbrandid","cartypeid","carcolorid"];e.check_filed=function(){var a=v.find("#car_type"),e={carprovinceid:v.find("#txt_carone").attr("data-id"),carcardnumber:v.find("#txt_carnumber").val(),carbrandid:a.attr("data-carbrandid"),cartypeid:a.attr("data-cartypeid"),carcolorid:a.attr("data-carcolorid")};for(var t in e)if("carcardnumber"==t){if(f.regular.is_carNo(e[t])===!1)return g.alert("请填写正确"+p[t]||""),!1}else if(0==e[t])return g.alert("请填写正确"+p[t]||""),!1;return e};var m=[txt_carone,txt_carnumber,car_type],b=["data-id",function(){return f.regular.is_carNo(txt_carnumber.value)},"data-carbrandid"]});