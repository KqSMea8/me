define("page/whycanyou/first/first.js",function(e,a){function t(){var e=a.check_filed();e!==!1&&(e=$.extend({},pageParams.upload_data,e),window.dd.dialog.loading("正在提交",5e3),$.ajax({type:"POST",url:pageParams.submit_url,data:e,success:function(e){var a;try{if(a=JSON.parse(e),0!=a.errno)return"101"==a.errno&&setTimeout(function(){location.replace(pageParams.homeurl)},2e3),dd.dialog.alert(a.errmsg);var t=a.data.shareinfo.link;if(t=t.replace(new RegExp("^"+location.protocol+"\\/\\/"+location.host),""),window.history.pushState){window.history.pushState({},document.title,t);var o=$.extend({step:2},a.data);n(o)}else location.href=t}catch(r){return dd.dialog.alert("网络有点不给力，请稍后再试哦~")}dd.dialog.loading("正在提交",0)},error:function(){dd.dialog.alert("网络有点不给力，请稍后再试哦~")}}))}var n,o=e("page/whycanyou/login/login.js")(pageParams.loginurl),r=a.$container=$(".first");a.wakeup=function(e,a){n=a};var i=[["人人能当堵侠，不做闪电侠","全民顺风，挑战早晚高峰"],["下班六点，到家九点","全民顺风，挑战早晚高峰"],["线上越来越快，路上越来越慢","全民顺风，挑战早晚高峰"]],l=i[Math.round(Math.random()*(i.length-1))],c={username:{alert:"请填写你的大名",placeholder:"滴滴小伙伴"},whycontent:{alert:"请填写你的第一句倡议",placeholder:l[0]},cancontent:{alert:"请填写你的第二句倡议",placeholder:l[1]}},u=["username","whycontent","cancontent"];u.forEach(function(e){$("#"+e).val(c[e].placeholder).one("touchstart",function(){this.value=""})}),a.check_filed=function(){for(var e,a={},t=0,n=u;e=n[t++];){var o=$("#"+e).val().trim();if((""==o||o==c.username.placeholder)&&1==t)return dd.dialog.alert({title:"",tip:c[e].alert,btn:{handler:function(){$("#"+e).focus()}}}),!1;a[e]=o}return a},$(["#"+u[1],"#"+u[2]].join(",")).on("blur",function(){this.nextElementSibling.style.opacity=this.value.trim()?"1":"0"}),$("#"+u[0]).on("blur",function(){this.value=this.value.replace(/([\u4E00-\u9FA5|\w]{5})(.+)/,"$1")}),r.find(".btn-common").on("click",function(){0==pageParams.islogin?o.show(function(){t()}):t()})});