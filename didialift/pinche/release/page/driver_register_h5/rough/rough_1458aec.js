define("page/driver_register_h5/rough/merged-base-dialog.js",function(require,exports,module){!function(window,undefined){var dd=window.dd||{};if(!dd||!dd.base){window.dd=dd,dd.ready=function(e){window.addEventListener("DOMContentLoaded",e,!1)};var base={};base.diffPlatform=function(e){var t=navigator.userAgent,n=function(e){"function"==typeof e&&e()};n(t.match(/(Android)/i)?e.android:t.match(/(iPhone|iPod|ios|iPad)/i)?e.ios:t.match(/(Windows phone)/i)?e.wp:e.others)},base.loadJS=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,document.getElementsByTagName("head")[0].appendChild(n),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||"function"==typeof t&&t()}},base.jsonp=function(e,t){var n=document.createElement("scfript");n.type="text/javascript",n.src=e+(e.indexOf("?")>-1?"&":"?")+"callback=dd.jsonp."+t,document.getElementsByTagName("head")[0].appendChild(n)},base.touch=function(e,t){e&&"function"==typeof t&&(e.addEventListener("touchstart",function(e){e.target.focus(),e.stopPropagation()},!1),e.addEventListener("touchmove",function(e){e.target.setAttribute("moved","true")},!1),e.addEventListener("touchend",function(e){e.target.blur(),"true"!==e.target.getAttribute("moved")?t(e):e.target.setAttribute("moved","false")},!1))},base.getQueryStr=function(){var e,t,n,i={},a=location.search.length?location.search.substring(1):"";if(!a)return i;if(-1===a.indexOf("&")&&a.indexOf("=")>-1)return e=a.split("="),t=decodeURIComponent(e[0]),n=decodeURIComponent(e[1]),t&&(i[t]=n||""),i;if(a.indexOf("&")>-1){items=a.split("&");for(var r=0,o=items.length;o>r;r++)e=items[r].split("="),t=decodeURIComponent(e[0]),n=decodeURIComponent(e[1]),t&&(i[t]=n);return i}},base.txtToJson=function(txt){if(txt){var j={};try{j=JSON.parse(txt)}catch(e){try{j=eval("("+txt+")")}catch(ee){}}return j}};var _singleton=function(e){var t=null;return function(){return t||(t=e.apply(this,arguments))}},createXhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}},_XHR=_singleton(createXhr);base.ajax=function(e){var t=function(e){if(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+e[n]);return t.replace(/^\&/,"")}};if(e){var n=e.isSequenceReq===!0?new _XHR:createXhr();e.isSequenceReq===!0&&0!==n.readyState&&n.abort();var i=0,a=e.timeout;if(e.async!==!1&&(e.async=!0),n.open(e.method,e.url,e.async),n.onreadystatechange=function(){4===n.readyState&&(i&&clearTimeout(i),200===n.status?e.succFunc(n.responseText):e.failFunc(n.responseText))},"GET"===e.method.toUpperCase())n.send(null);else if("POST"===e.method.toUpperCase()){var r=e.data?t(e.data):"";n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(r)}if(a){var o=a.millisecond||1e4;i=setTimeout(function(){n.abort(),a.callback&&a.callback()},o)}}},base.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},base.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},base.isFunc=function(e){return"[object Function]"===Object.prototype.toString.call(e)},Function.prototype.method=function(e,t){return this.prototype[e]||(this.prototype[e]=t),this},String.method("trim",function(){return this.replace(/^\s+|\s$/g,"")}),Array.method("contain",function(e){for(var t in this)if(this[t]===e)return!0;return!1}),dd.base=base}}(window),function(e){var t=e.dd||{};if(t.dialog)return t.dialog;t.dialog={};var n=document.documentElement,i=null,a=null,r=null,o={isArray:function(e){return Array.isArray(e)},insertDom:function(e){document.body.appendChild(e)},genDom:function(e,t,n){if(e)if("[object Object]"===Object.prototype.toString.call(e,null)){e.type=e.type||"loading",t.style.cssText=e.wallCss,n.style.cssText=e.wrapCss;var i="<div class='"+e.type+"'>";i+=this.genIcon(e.icon),i+=this.genTitle(e.title),i+=this.genTip(e),i+=this.genButtons(e.btns,e.ext)+"</div>",i+=this.genClose(e.close),n.innerHTML=i}else"[object String]"===Object.prototype.toString.call(e,null)?n.innerHTML=e:"[object HTMLDivElement]"===Object.prototype.toString.call(e,null)&&(e.style.display="inline-block",n.appendChild(e))},genIcon:function(e){if(!e)return"";var t=e.width||"8px",n=e.height||"36px",i=e.url||"/static/pinche/src/images/i-plaint.png",a=e.cssText||"",r="<img src="+i+' style="width:'+t+";height:"+n+";vertical-align:middle;"+a+'"/>';return'<p class="icon">'+r+"</p>"},genTitle:function(e){e=e||{};var t=e.cssText||"";return'<p class="title" style="'+t+'">'+(e.txt||"")+"</p>"},genTip:function(e){var t=e.tip||{},n=e.title||{};n.txt?(t.color=t.color||"#666",t.size=t.size||"1.4rem"):(t.color=t.color||"#333",t.size=t.size||"1.6rem");var i="color:"+t.color+";font-size:"+t.size+";";return t.txt?'<div class="tip" style="'+i+'">'+t.txt+"</div>":""},genClose:function(e){return e?'<a class="close" href="javascript:void(0);"></a>':""},genButtons:function(e,t){var n="";if(e&&this.isArray(e)){n+='<div class="btns clearfix">';for(var i=0,a=null,r=e.length;r>i;i++)a=e[i],n+='<a class="'+a.kls+'" id="'+a.id+'">'+a.val+"</a>";n+="</div>"}return t&&"string"==typeof t&&(n+=t),n},addEvents:function(e){if(e.close){var t=a.getElementsByClassName("close")[0];t.addEventListener("touchstart",function(){r.hide()},!1)}if(this.isArray(e.btns)&&e.btns.length)for(var n=0,i=null,o=e.btns.length;o>n;n++)if(i=e.btns[n]){var c=i.event||"click",s=document.getElementById(i.id);s&&(s.removeEventListener(c,i.handler,!1),s.addEventListener(c,i.handler,!1))}}},c=function(e){return this instanceof c?void new c.fn.init(e):r=new c(e)};c.fn=c.prototype={constructor:c,init:function(t){if(t){var n=document.createElement("div"),r=document.createElement("div");n.id="d-wall",r.id="d-wrap",o.genDom(t,n,r),i&&document.body.removeChild(i),a&&document.body.removeChild(a),o.insertDom(n),o.insertDom(r),i=n,a=r,"[object Object]"===Object.prototype.toString.call(t,null)&&e.setTimeout(function(){o.addEvents(t)},400)}},show:function(){function t(i){e.removeEventListener(i.type,t,!1),n.reset.call(n)}var n=this;i&&a&&(n.reset(),i.style.display="block",a.style.display="inline-block",e.addEventListener("resize",t,!1),e.addEventListener("scroll",t,!1))},hide:function(){i&&a&&(i.style.display="none",a.style.display="none")},reset:function(){if(i&&a){a.style.top=(n.clientHeight-a.clientHeight-20)/2+"px",a.style.left=(n.clientWidth-a.clientWidth)/2+"px";var e=document.body.scrollHeight||document.documentElement.scrollHeight;i.style.width=n.clientWidth+"px",i.style.height=e+"px"}}},t.dialog.alert=function(e){var t={};return"string"==typeof arguments[0]&&arguments[0]?(t.title=arguments[1]||"",t.tip=arguments[0],t.btn={val:arguments[2]||"我知道了"}):e&&"object"==typeof e&&(t=e),r=c({type:"alert",icon:t.icon||{url:"http://static.xiaojukeji.com/pinche/images/i-plaint.png",width:"8px",height:"36px"},wrapCss:"background: #fff;width: 280px;text-align: center;",title:{txt:t.title},tip:{txt:t.tip},btns:[{id:"btn-close",kls:"btn-orange",event:"click",val:t.btn&&t.btn.val||"我知道了",handler:function(e){r.hide(),"function"==typeof t.btn.handler&&t.btn.handler(e)}}]}),r.show(),r},t.dialog.confirm=function(e){var t={};"string"==typeof arguments[0]&&arguments[0]?(t.text=arguments[0]||"",t.confirm={},t.confirm.handler=arguments[1]):e&&"object"==typeof e&&(t=e);var n=t.cancel||{},i=t.confirm||{};return r=c({type:"confirm",tip:{txt:t.text},icon:t.icon||{url:"/static/pinche/src/images/i-plaint.png",width:"8px",height:"36px"},wrapCss:"background: #fff;width: 280px;text-align: center;",btns:[{id:n.id||"btn-cancel",val:n.val||"取消",kls:n.kls||"btn-white",event:n.event||"click",handler:function(e){r.hide(),"function"==typeof n.handler&&n.handler(e)}},{id:i.id||"btn-ok",val:i.val||"确定",kls:i.kls||"btn-orange",event:i.event||"click",handler:function(e){r.hide(),"function"==typeof i.handler&&i.handler(e)}}],ext:t.ext}),r.show(),r},t.dialog.loading=function(t){var n={};return"object"!=typeof arguments[0]?(n.text=arguments[0],n.time=arguments[1]||0):n=t,r=c({type:"loading",wallCss:"",wrapCss:"background:#0c0d0d;opacity:0.7;width:140px;height:140px;",icon:t&&t.icon||{width:"30px",height:"30px",url:"/static/pinche/src/images/loading_2.gif"},tip:{txt:n.text||"正在加载",color:"#fff",size:"14px"}}),r.show(),n.time||(n.time=5e3),e.setTimeout(function(){r.hide(),console.log("function"==typeof n.hideCB),"function"==typeof n.hideCB&&n.hideCB()},n.time),r},t.dialog.flatLoading=function(t){var n={};return"object"!=typeof arguments[0]?(n.text=arguments[0],n.time=arguments[1]||0):n=t,r=c({type:"loading",wallCss:"",wrapCss:"background:#fff;width:140px;height:140px;",icon:t&&t.icon||{width:"30px",height:"30px",url:"/static/pinche/src/images/loading_2.gif"},tip:{txt:n.text||"",color:"#666",size:"14px"}}),r.show(),n.time||(n.time=5e3),e.setTimeout(function(){r.hide(),"function"==typeof n.hideCB&&n.hideCB()},n.time),r},t.dialog.logoLoading=function(e,t){return r=c('<div class="loading-car"><div class="bg"></div><div class="loading-car-icon"></div></div>'),r.show(),e||(e=5e3),setTimeout(function(){r.hide(),"function"==typeof t&&t()},e),r},t.dialog.tip=function(t){var n={};"object"!=typeof arguments[0]?(n.text=arguments[0],n.time=arguments[1]||0):n=t,n.time=parseInt(n.time)||600,r=c({type:"tip",wallCss:"",wrapCss:"background:#0c0d0d;width:140px;height:140px;opacity:0.7;",icon:n.icon||{url:"/static/pinche/src/images/i-plaint.png",width:"8px",height:"36px"},tip:{txt:n.text||"温馨提醒",color:"#fff",size:"14px"}}),r.show(),e.setTimeout(function(){r.hide()},n.time)},t.dialog.Fn=c,e.dd=t}(window)}),define("page/driver_register_h5/rough/dd.slideSelect.js",function(){dd.base}),define("page/driver_register_h5/rough/p-register.js",function(e){dd.ready(function(){function t(){var e=document.getElementById("carnoSelect");ulEl=e.getElementsByClassName("options")[0];var t=function(){l.ajax({method:"POST",url:"/pinche/cartype/getlicensehead",succFunc:function(t){var n=l.txtToJson(t);if("0"==n.errno){for(var i=n.data,a=n.sort,r="",o=0,c=a.length;c>o;o++)r+='<li data-id="'+a[o]+'" data-show="'+i[a[o]]+'">'+i[a[o]]+"</li>";ulEl.innerHTML+=r,slideSelect_carno(txt_carOne,e,[])}},failFunc:function(){}})};t()}function n(){var e=function(e,t){u[e]=t,localStorage.driver_form=JSON.stringify(u)};txt_realname.addEventListener("change",function(){e("txt_realname",this.value)},!1),txt_licence.addEventListener("change",function(){e("txt_licence",this.value)},!1),txt_carower.addEventListener("change",function(){e("txt_carower",this.value)},!1),txt_carOne.addEventListener("click",function(){e("txt_carOne",txt_carOne.value)},!1),txt_carOne2.addEventListener("change",function(){e("txt_carOne2",this.value)},!1),u&&(txt_realname.value=u.txt_realname||"",txt_licence.value=u.txt_licence||"",txt_carower.value=u.txt_carower||"",txt_carOne.value=u.txt_carOne||"",txt_carOne2.value=u.txt_carOne2||"")}function i(){txt_realname.addEventListener("focus",function(){this.className=""},!1),txt_realname.addEventListener("blur",function(){f.is_Chinese_name(this.value)||(this.className="error")},!1),txt_licence.addEventListener("focus",function(){this.className=""},!1),txt_licence.addEventListener("blur",function(){f.is_ID_card(this.value)||(this.className="error")},!1),txt_carower.addEventListener("focus",function(){this.className=""},!1),txt_carower.addEventListener("blur",function(){f.is_Chinese_name(this.value)||(this.className="error")},!1),txt_carOne2.addEventListener("focus",function(){this.className=""},!1),txt_carOne2.addEventListener("blur",function(){f.is_carNo(this.value)||(this.className="error")},!1)}function a(e){var t=function(e,t){d.alert({title:"",tip:t,btn:{handler:function(){e.focus()}}})};if("1"===pageParams.drive_license_changeable){if(!f.is_Chinese_name(e.drive_license_name))return t(txt_realname,"请填写真实姓名"),!1;if(!f.is_ID_card(e.drive_license_number))return t(txt_licence,"身份证号填写错误"),!1}if("1"===pageParams.travel_license_changeable){if(!f.is_Chinese_name(e.travel_license_name))return t(txt_carower,"行驶证姓名填写错误"),!1;if(""==txt_carOne.value)return d.alert("请选择车牌归属地"),!1;if(!f.is_carNo(e.car_license_number))return t(txt_carOne2,"车牌号填写错误"),!1}return!0}function r(e){d.loading("正在请求，请稍后~"),l.ajax({method:"POST",url:pageParams.submit_url,data:e,succFunc:function(e){var t=l.txtToJson(e);"0"==t.errno?(localStorage.removeItem("driver_form"),location.replace(t.url)):"3002"==t.errno?(localStorage.removeItem("driver_form"),location.replace(t.url)):c(function(){d.alert(t.errmsg)})},failFunc:function(){d.alert("网络有点不给力，请稍后再试哦~")}})}function o(e){$(".main").attr("class","main animate begin_animate"),setTimeout(function(){$(".main").attr("class","main animate end_animate")},0),setTimeout(function(){$(".main").attr("class","main ended_animate"),e()},350)}function c(e){$(".main").attr("class","main animate end_animate"),setTimeout(function(){$(".main").attr("class","main animate begin_animate")},0),setTimeout(function(){$(".main").attr("class","main"),e()},450)}function s(t){if(m!==!0){m=!0;var n=["travelauthpicurl","driveauthpicurl","carauthpicurl"],i=[".driving_licence_front",".driving_licence_backend",".car_photo"],a={},o=function(e,t){var r=n.indexOf(e);if(-1!==r){var o=$(i[r]);a[e]=t,o.addClass("photo_uploaded"),o.find(".shadow").html(t),o.find(".shadow").css("background-image","url("+t+")"),h.set(e,t)}},c=function(e,t){var r=n.indexOf(e);-1!==r&&($pick_node=$(i[r]),$pick_node.find(".shadow").html("error | "+t.message),$pick_node.removeClass("photo_uploaded"),delete a[e])};addEventListener("error",function(e){$(".driving_licence_backend").find(".shadow").html(e.message)},!1),n.forEach(function(e){var t=h.get(e);t&&o(e,t)}),$(".upload_card").on("click",".file_select",function(t){var a=$(t.currentTarget),r=a.attr("class").trim();if(r=r.split(/\s+/)[1],0!=r){var s=i.indexOf("."+r);if(-1!==s){var l=e("ddbridge/ddbridge.js");l.uploadImage({},function(e){try{e=JSON.parse(e),o(n[s],e.data.data)}catch(t){c(n[s],t)}})}}}),l.touch($(".register_submit")[0],function(){var e,o=!0;if($.each(n,function(t,n){return void 0===a[n]?(e=t,o=!1):void 0}),o===!1){var c=$(i[e]).find(".select_tips").text()||"完整资料";return void d.alert({title:"",tip:"请填写"+c,btn:{handler:function(){}}})}t=$.extend(t,a),r(t)})}}var l=dd.base,d=dd.dialog,u=l.txtToJson(localStorage.driver_form||{}),f={is_Chinese_name:function(e){var t=/^[\u4E00-\u9FA5]{2,}$/;return t.test(e)?!0:!1},is_ID_card:function(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return t.test(e)===!1?!1:!0},is_carNo:function(e){var t=/^[A-Za-z]{1}[A-Za-z0-9]{5}$/;return t.test(e)?!0:!1}};!function(){t(page_driver.car_province_id),"join"==pageParams.type&&n(),i(),$(btnSubmit).on("click",function(){if("btn-gray"!=btnSubmit.className){for(var e=document.getElementsByTagName("input"),t=0,n=e.length;n>t;t++){var i=e[t];i.setAttribute("readOnly","true"),i.blur()}scrollTo(0,0),setTimeout(function(){for(t=0,n=e.length;n>t;t++){var i=e[t];i.removeAttribute("readOnly")}},100);var r={drive_license_name:txt_realname.value,drive_license_number:txt_licence.value.toLocaleUpperCase(),travel_license_name:txt_carower.value,car_province_id:txt_carOne.getAttribute("data-id"),car_license_number:txt_carOne2.value.toLocaleUpperCase(),phone_number:pageParams.phone||"",token:pageParams.token||"",sign:pageParams.sign||""},c=a(r);c&&o(function(){s(r)})}})}();var m=!1,h={set:function(e,t){try{return localStorage.setItem(e,t),!0}catch(n){return!1}},get:function(e){try{return localStorage.getItem(e)}catch(t){return!1}},remove:function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}}})}),define("page/driver_register_h5/rough/app-share.js",function(){dd.ready(function(){function e(e){var e={title:"顺风出行，期待每一次的不期而遇。",desc:"滴滴顺风车车主有奖招募中，有车即可参与",link:location.href,imgUrl:"http://static.xiaojukeji.com/pinche/images/share.jpg"};wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,trigger:function(){},success:function(){},cancel:function(){},fail:function(){}}),wx.onMenuShareTimeline({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,trigger:function(){},success:function(){},cancel:function(){},fail:function(){}}),wx.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,trigger:function(){},complete:function(){},success:function(){},cancel:function(){},fail:function(){}})}var t=dd.base||{};t.ajax({method:"POST",data:{url:encodeURIComponent(location.href)},url:"/pinche/wxApi/getJsSdkConfig",succFunc:function(n){var i=t.txtToJson(n);if("0"==i.errno){var a={debug:!1,appId:"wxab524d83299d6c83",timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]};wx.config(a),wx.ready(function(){e()})}},failFunc:function(){}})}),window.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("btnNativeShare"),t=document.getElementById("nativeShareUrl"),n=t?t.value:"",i=document.getElementById("btnDownload"),a={img_url:"http://static.xiaojukeji.com/pinche/images/share.jpg",title:"顺风出行，期待每一次的不期而遇。",desc:"滴滴顺风车车主有奖招募中，有车即可参与",link:n},r=function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n])},o=[{button:e,method:"invoke_entrance"}],c=function(e){r(o,function(t){!function(t){t.button.addEventListener("touchend",function(){"undefined"!=typeof e&&e.callHandler(t.method)})}(t)})},s={entrance:{icon:"http://static.diditaxi.com.cn/webapp/images/driver.png"},buttons:[{type:"share_weixin_timeline",name:"分享到微信朋友圈",data:{share_url:a.link,share_icon_url:a.img_url,share_img_url:a.img_url,share_title:a.title,share_content:a.desc,share_from:"native"},callback:function(){}},{type:"share_weixin_appmsg",name:"分享给微信好友",data:{share_url:a.link,share_icon_url:a.img_url,share_img_url:a.img_url,share_title:a.title,share_content:a.desc,share_from:"native"},callback:function(){}},{type:"share_qq_appmsg",name:"分享给QQ好友",data:{share_url:a.link,share_icon_url:a.img_url,share_img_url:a.img_url,share_title:a.title,share_content:a.desc,share_from:"native"},callback:function(){}},{type:"share_qzone",name:"分享到QQ空间",data:{share_url:a.link,share_icon_url:a.img_url,share_img_url:a.img_url,share_title:a.title,share_content:a.desc,share_from:"native"},callback:function(){}}]},l=function(){e.style.display="block",shareText.style.display="none",i&&(i.style.display="none");var t=document.getElementById("domTitle");t&&(t.innerHTML="顺风车车主招募")},d=function(e){window.DidiJSBridge?e(DidiJSBridge):document.addEventListener("DidiJSBridgeReady",function(){e(DidiJSBridge)},!1)};d(function(e){"undefined"!=typeof e&&(e.callHandler("init_entrance",JSON.stringify(s)),c(e),l())})},!1)});