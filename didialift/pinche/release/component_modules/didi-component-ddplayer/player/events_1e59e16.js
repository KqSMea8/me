define("didi-component-ddplayer/player/events.js",function(e){"use strict";{var n=e("didi-component-ddplayer/player/mediaPlayer.js"),o=e("didi-component-ddplayer/base/vars.js"),i=e("didi-component-ddplayer/base/special.js");e("didi-component-ddplayer/base/console.js")}n.prototype.on=function(e,n){var o=this;this._onDomLoaded(function(){"ended"===e||"onended"===e?o.eventProcess.userEnded.push({name:"ended",process:function(){n.call(o)}}):o.$video.on(e,function(e){n.call(o,e)})})},n.prototype.off=function(e,n){var o=this;this._onDomLoaded(function(){e=e.toLowerCase(),o.$video.off(e,n)})},n.prototype.trigger=function(e){var n=this;this._onDomLoaded(function(){e=e.toLowerCase(),n.$video.trigger(e)})},n.prototype.one=function(e,n){var o=this;this._onDomLoaded(function(){e=e.toLowerCase(),"ended"===e?this.$video.on(e,function(){o.cache.curIndex===o.cache.totCounts-1&&o.$video.one(e,function(e){n.call(o,e)})}):this.$video.one(e,function(e){n.call(o,e)})})},n.prototype._addEvent=function(e,n,o){var t=this.eventProcess,s=this;if(e=e.toLowerCase(),!$.isUndefined(e)&&!$.isUndefined(t[e])){var d={},r=i.isAllowTimeupdateReplaceEnded()&&("ended"===e||"onended"===e);$.isFunction(n)?(r?(e="timeupdate",d.process=function(){s.videoTag.duration-s.videoTag.currentTime<.5&&n.call(s)}):d.process=function(){n.call(s)},d.name="_"+e+(new Date).getTime(),t[e].push(d)):$.isString(n)&&$.isFunction(o)&&(d.process=r?function(){s.videoTag.duration-s.videoTag.currentTime<.5&&o.call(s)}:function(){o.call(s)},d.name=n,t[e].push(d))}},n.prototype._removeEvent=function(e,n){var o=this.eventProcess;$.isUndefined(e)||$.isUndefined(o[e])||($.isUndefined(n)?o[e]=[]:$.isString(n)&&$.each(o[e],function(i,t){t.name===n&&o[e].splice(i,1)}))},n.prototype._fireEvent=function(e){var n=this.eventProcess,o=this;$.isUndefined(e)||$.isUndefined(n[e])||$.each(n[e],function(e,n){n.process.call(o)})},n.prototype._onBaseEnded=function(){var e=this,n=e.cache;if(this._startPlayTime=$.now(),this._bufferCount=0,-1===n.curIndex&&(n.curIndex=0),o.IsBaiduBrowser||o.IsBaiduBoxApp){var i=n.srcList[n.modeType],t=0;$.each(i,function(e,o){return t+=o.duration,e>=n.curIndex?!1:void 0})}var s=n.getNextUrl();if(""!==s)this.trigger("waiting"),n.curPlayUrl=s,n.curIndex++,this.setSrc(n.curPlayUrl),setTimeout(function(){e.videoTag.play()},100),this.videoData.video_src=s;else{if(n.loop){this.trigger("waiting");var d=n.getFirstUrl();this.setSrc(d),this.play(),n.curPlayUrl=d,n.curIndex=-1,this.videoData.video_src=d}else n.curPlayUrl=s;$.each(this.eventProcess.userEnded,function(e,n){n.process()})}this._nextPreLoadImg=null},n.prototype._onKeyDown=function(e,n){var o=e.keyCode||e.which||e.charCode,i=function(e){var o=n.getVolume();o+=e,n.setVolume(o)};if(!$.isUndefined(o))switch(o){case 38:i(.1);break;case 40:i(-.1);break;case 37:n.seekTo(n.currentTime-10);break;case 39:n.seekTo(n.currentTime+10)}},n.prototype._initEvent=function(){var e=this,n=this.eventProcess;this.$video&&this.$video.length>0&&$.each(e.eventList,function(i,t){$.isArray(n[t])&&(o.IsSAMSUNGNote3&&"ended"!==t||!o.IsSAMSUNGNote3)&&e.$video.on(t,function(o){$(e.$video,e.$main).length>0&&$.each(n[t],function(n,i){i.process.call(e,o)})})}),this._addEvent("ended",this._onBaseEnded),$("body").on("keydown",function(n){e._onKeyDown(n,e)})}});