define("didi-component-ddplayer/player/loadCacheData.js",function(t,i,e){"use strict";var r=t("didi-component-ddplayer/base/vars.js"),n=(t("cookie"),t("didi-component-ddplayer/base/special.js"),{vid:"",elemId:"",poster:"",posterType:"",mediaType:"",modeType:"",modeTypeList:[],srcType:"",width:"",height:"",volume:0,curPlayUrl:"",srcList:{},pointList:[],autoplay:!1,defControls:!1,loop:!1,preload:!1,title:"",duration:0,curIndex:-1,totCounts:-1,history:{},ipLimit:"",liveEnName:"",liveIcon:"",liveId:"",timeLimit:-1,liveUrl:"",vidList:[],vidCurIndex:-1,debug:!1,mainActor:"",latestCount:"",desc:"",oriUrls:null,channeled:"",fullscreenType:0,isRemHistory:!1,modeList:["nor","hig","sup","app"]}),o=function(t,i){$.extend(this,n),$.merge(this,t),$.isUndefined(i)||(d(i),this._initVOD(i))},s=function(t,i){var e=(t.cateCode||t.cate_code||"",["vid="+t.vid].join(""));return $.isUndefined(i)||(i+=(i.match(/\?/)?"&":"?")+e),i},d=function(t){var i=t.urls;for(var e in i)if("downloadUrl"===e){if(!$.isUndefined(i[e][0])&&""!==i[e][0]){var r=i[e][0];i[e][0]=s(t,r)}}else for(var n in i[e])$.each(i[e][n],function(r,o){i[e][n][r]=s(t,o)})};o.prototype.getPlayList=function(){return this.srcList[this.modeType]||[]},o.prototype.getNextUrl=function(){var t=this.getPlayList(),i=this.curIndex+1,e=t[i];return $.isUndefined(e)?"":e.url},o.prototype.getFirstUrl=function(){var t=this.getPlayList(),i=t[0];return $.isUndefined(i)?"":i.url},o.prototype._initVOD=function(t){var i=this;i.poster="horizon"===i.posterType?t.horHighPic||t.verHighPic||"":t.verHighPic||t.horHighPic||"";var e=t.totalDuration||t.total_duration||0;i.duration=parseInt(e,10),i.timeLimit>-1&&i.timeLimit<i.duration&&(i.duration=i.timeLimit),i.title=t.tvname||t.videoName||t.video_name||"",i.mainActor=t.main_actor||"",i.latestCount=t.latest_video_count||"",i.desc=t.video_desc||"",i.srcType=t.srcType||"mp4",$.isUndefined(t.urls)||(i.oriUrls=t.urls),!$.isUndefined(t.ep)&&t.ep instanceof Array&&$.each(t.ep,function(t,e){var r={};r.time=parseInt(e.k,10),r.desc=e.v,i.pointList.push(r)}),i.vid=t.vid;var n=!1;if(!$.isUndefined(t.urls)){var o=t.urls[i.srcType],s=t.durations;for(var d in o)i.srcList[d]=[],o[d]instanceof Array&&$.each(o[d],function(e,r){var n={};n.url=r,n.duration="m3u8"===i.srcType?t.totalDuration||t.total_duration||-1:parseInt(s[d][e]||-1,10),i.srcList[d].push(n)}),!n&&i.srcList[d].length>0&&(n=!0,i.totCounts=i.srcList[d].length);var a=function(){var e={};e.url="",$.isUndefined(t.urls.downloadUrl)||(e.url=t.urls.downloadUrl[0]||""),e.duration=parseInt(i.duration||-1,10),i.srcType="mp4",i.modeType=i.modeType,i.srcList.nor=[e],i.totCounts=i.srcList.nor.length};n||"client"===i.srcType||a(),i.totCounts>0&&(i.curIndex=0),!r.IsIphone&&r.IsUCBrowser&&"client"!==i.srcType&&a(),/Android 2./i.test(r.UA)&&a(),i._initCurPlayUrlAndModeType()}},o.prototype._initCurPlayUrlAndModeType=function(){var t=this,i=t.getPlayList(),e=this.modeList;$.each(e,function(e,r){if(!$.isUndefined(t.srcList[r])&&t.srcList[r].length>0){if(0===i.length)return t.modeType=r,!1;t.modeTypeList.push(r)}}),$(e).indexOf("app")>-1&&this.modeTypeList.push("app"),i=this.getPlayList(),i.length>0&&(this.curPlayUrl=i[0].url)},e.exports=o});