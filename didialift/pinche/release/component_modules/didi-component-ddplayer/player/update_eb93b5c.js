define("didi-component-ddplayer/player/update.js",function(e){"use strict";var i=e("didi-component-ddplayer/player/mediaPlayer.js"),a=e("didi-component-ddplayer/base/vars.js"),t=e("didi-component-ddplayer/player/loadCacheData.js"),d=e("didi-component-ddplayer/base/special.js"),o=e("didi-component-ddplayer/player/html5UI.js"),n=e("didi-component-ddplayer/player/errorTypes.js"),s=e("didi-component-ddplayer/base/console.js"),l=e("didi-component-ddplayer/player/settings.js"),r=function(e){var i="error";if(!$.isUndefined(e)&&null!==e)if($.isUndefined(e.urls)||$.isUndefined(e.durations))$.isUndefined(e.vid)&&$.isUndefined(e.liveId)?$.isUndefined(e.src)||(i="source"):i="partial";else try{var t=a.IsIphone||a.IsQQBrowser?"m3u8":"mp4";t=d.isDiDiForceUseMp4()?"mp4":t,i="whole";for(var o in e.urls[t])e.durations[o].length!==e.urls[t][o].length&&(i="partial")}catch(n){i="partial"}return i},c=function(e){var i=e.cache;!$.isUndefined(e.adv)&&$.isFunction(e.adv.hideMediaView)&&e.adv.hideMediaView(),e.$title.html(i.title),document.title=i.title,e.$ctrlCurTime.html($.formatSeconds(0)),e.$ctrlDuration.html($.formatSeconds(i.duration)),e.$ctrlCurPlayedBar.css({width:0}),e.changePoster({url:i.poster})},p=function(e,i){if(e.trigger("loadedvideodata"),"videoDataList"===e.videoList.type){var d=e.videoList.videoDataList[e.videoList.curIndex];i.channeled=d.channeled||"1212120001",i.timeLimit=d.timeLimit||"0"}if(window.videoData=i,e.cache=new t(e.config,i),e.videoData=$.extend({},i),e._firstLoadFlag){if(e.$player.append(o.makeVideoTmpl(e.cache)),s.log("加载dom完成, 耗时--->"+(Date.now()-ddvp.debug.playerLoadDomStartTime)/1e3),e._initDoms(),"noSupport"===e.$video.attr("data-nosupport")){var l=n.SUPPORT[300];return void e._showMsg({text:l,btns:{btnA:{text:"暂时无法播放"}}})}e._loadedDomFlag=!0,e._initEvent(),e._initControls(),e._initException(),e._autoNextVideoService(),e.$loadingDesc.oriHide(),e.$video.length>0&&(e.videoTag.volume=e.config.volume,e.$ctrlDuration.html($.formatSeconds(e.cache.duration)))}else c(e);e.setSrc(e.cache.curPlayUrl),e.duration=e.cache.duration,e.currentTime=0,e._hideLoading(),e.cache.autoplay?(e.$midPlay.oriHide(),e._sendVVFlag||(s.log("统计: vv"),e._sendVVFlag=!0),e._playOrPause("play")):(e._playOrPause("pause"),e._hideMainCtrl(),e._showMidPlayBtn(),e.showPoster(),(a.IsUCBrowser||a.IsQQBrowser&&!/QQBrowser\/4\.2/i.test(a.UA))&&e.$video.oriHide()),e._firstLoadFlag,s.log("播放器加载时间:"+(Date.now()-ddvp.debug.playerLoadStartTime)/1e3+"秒"),e._sendPlayDisplayCompleteFlag||(s.log("发送行为统计点:(play_display_complete)"),e._sendPlayDisplayCompleteFlag=!0)};i.prototype.updateMedia=function(e,i){var t=this;if(!$.isUndefined(e)){var d=r(e);if("error"!==d){if(null!==t.videoData&&(t.hideRecommend(),t.config.isShowRecommend&&"source"===d&&t.videoData.video_src.indexOf(e.src)>-1))return void(t._showRecommendFlag=!0);t._showRecommendFlag=!1,t._firstLoadFlag||(ddvp.debug.playerLoadStartTime=Date.now(),this._sendRealVVFlag&&!this._sendEndFlag&&(s.log("统计: ended"),this._sendEndFlag=!0),$.isUndefined(this.videoData)||(this.config.data=this.videoData,this.config.dataType="video_data",e.channeled&&"default"!==e.channeled&&(this.config.channeled=e.channeled)),this._sendVVFlag=!1,this._sendRealVVFlag=!1,this._sendStartFlag=!1,this._sendEndFlag=!1,this._playByHistoryFlag=!1,this._timeoutFlag=!1,$.isUndefined(this.config)&&(this.config=l.initConfig({})),e=$.extend({},e),"undefined"!=typeof i&&(this.config.autoplay=i),this._playOrPause("pause"),a.IsBaiduBrowser||this._showLoading()),"partial"===d||"source"===d?(this._getDataFlag=!1,setTimeout(function(){t._getDataFlag||(t._timeoutFlag=!0,t._showMsg({text:n.REQUEST[400],btns:{btnA:{text:"刷新",callback:function(){t._timeoutFlag=!1,t._hideMsg(),t.updateMedia(e,i)}}}}))},this._dataTimeout),ddvp.debug.playerLoadMediaDataStartTime=Date.now()):p(t,e)}else t._showMsg({text:n.PROCESS[202]})}}});