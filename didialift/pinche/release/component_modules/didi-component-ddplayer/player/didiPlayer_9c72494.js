define("didi-component-ddplayer/player/didiPlayer.js",function(i,t,e){"use strict";i("didi-component-ddplayer/player/events.js"),i("didi-component-ddplayer/player/controls.js"),i("didi-component-ddplayer/player/update.js"),i("didi-component-ddplayer/player/poster.js"),i("didi-component-ddplayer/player/message.js"),i("didi-component-ddplayer/player/videoList.js"),i("didi-component-ddplayer/player/exception.js");var d=i("didi-component-ddplayer/base/vars.js"),s=i("didi-component-ddplayer/base/console.js"),o=i("didi-component-ddplayer/player/mediaPlayer.js"),a=i("didi-component-ddplayer/player/html5UI.js"),r=i("didi-component-ddplayer/player/settings.js"),n=i("didi-component-ddplayer/player/errorTypes.js");o.prototype._init=function(i){this._hideMainCtrlTime=null,this._firstLoadFlag=!0,this._dataTimeout=5e3,this._showRecommendFlag=!1,this._sendVVFlag=!1,this.config=r.initConfig(i),this._sendPlayDisplayCompleteFlag=!1},o.prototype.htmlTo=function(i){if(i=$(i),i.length>0){var t=this;if(this.$parentDom=i,$.isUndefined(this.$player)){ddvp.debug.playerLoadDomStartTime=Date.now(),i.html(a.makeLoadingTmpl(this.config)),s.log("加载loading完成, 耗时--->"+(Date.now()-ddvp.debug.playerLoadDomStartTime)/1e3),this.$player=$("#"+this.config.mainId),this.$playerLoading=$("#"+this.config.mainId+" .ddvp_player_loading"),this._getDataFlag=!1;var e=this.config.data;if($.isUndefined(e))t._showMsg({text:n.PROCESS[202]});else if($.isUndefined(e.vidList)&&$.isUndefined(e.videoDataList)){var d={videoDataList:[e]};this.videoList=this._videoList(d),this.updateMedia(e)}else{var o,r=this.videoList=this._videoList(e);try{o="vidList"===r.type?{vid:r.vidList[r.curIndex],site:r.site}:r.videoDataList[r.curIndex]}catch(l){t._showMsg({text:n.PROCESS[204]})}this.updateMedia(o)}}else this.$parentDom.html(this.$main),this.cache.autoplay&&this._playOrPause("play")}},o.prototype._initDoms=function(){var i="#"+this.config.mainId;this.$main=$(i),this.$loading=$(i+" .ddvp_player_loading"),this.$loadingDesc=$(i+" .ddvp_player_loading_notice"),this.$video=$(i+" #"+this.config.elemId),this.videoTag=$(i+" #"+this.config.elemId)[0],this.$titleCon=$(i+" .ddvp_title"),this.$title=$(i+" .ddvp_title_content"),this.$posterCon=$(i+" .ddvp_poster"),this.$posterRight=$(i+" .ddvp_poster_right"),this.$mid=$(i+" .ddvp_mid"),this.$midPlay=$(i+" .ddvp_mid_play"),this.$midRewindForwardCon=$(i+" .ddvp_mid_rewind_forward"),this.$midTime=$(i+" .ddvp_mid_time"),this.$midModeListCon=$(i+" .ddvp_mid_mode"),this.$mideCurModeBtn=$(i+" .ddvp_mid_cur_mode_btn"),this.$midCurMode=$(i+" .ddvp_mid_cur_mode"),this.$midModeList=$(i+" .ddvp_mid_mod_list"),this.$midModeLi=$(i+" .ddvp_mid_mod_list li"),this.$ctrlCon=$(i+" .ddvp_ctrl"),this.$ctrlBar=$(i+" .ddvp_ctrl_bar"),this.$ctrlPlay=$(i+" .ddvp_ctrl_play"),this.$ctrlPause=$(i+" .ddvp_ctrl_pause"),this.$ctrlBuffer=$(i+" .ddvp_ctrl_buffer"),this.$ctrlPointsCon=$(i+" .ddvp_ctrl_points"),this.$ctrlCurPlayedBar=$(i+" .ddvp_ctrl_played_bar"),this.$ctrlTime=$(i+" .ddvp_ctrl_time"),this.$ctrlCurTime=$(i+" .ddvp_ctrl_cur_time"),this.$ctrlDuration=$(i+" .ddvp_ctrl_duration"),this.$ctrlDragAnchor=$(i+" .ddvp_ctrl_drag_anchor"),this.$ctrlTrackBar=$(i+" .ddvp_ctrl_track_bar"),this.$ctrlScreen=$(i+" .ddvp_ctrl_screen"),this.$ctrlFullScreen=$(i+" .ddvp_ctrl_full_screen"),this.$ctrlShrinkScreen=$(i+" .ddvp_ctrl_shrink_screen"),this.$maskLayer=$(i+" .ddvp_mask_layer")},o.prototype._playOrPause=function(i){var t=this;ddvp.debug.playerPlayStartTime=Date.now(),clearTimeout(this._hideMainCtrlTime),"pause"===i?(this._pause(),d.IsNewWindowsPhone?setTimeout(function(){t._showPlayBtn()},300):this._showPlayBtn(),this._showMainCtrl()):(!this._sendVVFlag&&(d.IsBaiduBrowser||d.IsBaiduBoxApp||d.IsIOS&&(d.IsQQBrowser||d.IsUCBrowser))&&(s.log("统计: vv"),this._sendVVFlag=!0),!this._sendRealVVFlag&&((/QQBrowser\/5\./i.test(d.UA)||d.IsUCBrowser)&&d.IsIOS||($.isUndefined(this.adv)||this.adv.isMediaPlayed)&&d.IsBaiduBoxApp)&&(s.log("统计: reallvv"),this._sendRealVVFlag=!0),(d.IsUCBrowser||d.IsQQBrowser)&&this.$video.oriShow(),(/UCBrowser\/9\./i.test(d.UA)||d.IsSonyPhone||d.IsVivoPhone||d.IsUCBrowser)&&d.IsAndroid?setTimeout(function(){t._play()},50):d.IsWindowsPhone?setTimeout(function(){t._play()},300):!this._firstLoadFlag&&d.IsIOS&&d.IsQQBrowser?setTimeout(function(){t._play()},50):this._play(),this._startPlayTime=$.now(),this._hideMainCtrlTime=setTimeout(function(){t._hideMainCtrl()},3e3),this._firstLoadFlag?(d.IsIphone||d.IsBaiduBrowser||!this.cache.autoplay||(this.$midPlay.oriShow(),this._showPlayBtn(),this.showPoster()),this._firstLoadFlag=!1):d.IsBaiduBrowser?this._hideLoading():this._showLoading(),(d.IsIphone||d.IsOldWindowsPhone||d.IsQQBrowser||d.IsBaiduBrowser)&&this._showMidPlayBtn(),d.IsIphone&&(d.IsUCBrowser||d.IsQQBrowser)&&this._showMainCtrl())},o.prototype._autoNextVideoService=function(){var i=this;i.config.isShowRecommend&&(i._showRecommendFlag=!0,this.on("ended",function(){setTimeout(function(){if(i._showRecommendFlag){s.log("显示相关推荐");var t=i.videoList,e=t.curIndex,d=null;"vidList"===t.type&&e<t.vidList.length-1?(t.curIndex++,d={vid:t.vidList[t.curIndex],site:t.site}):"videoDataList"===t.type&&e<t.videoDataList.length-1&&(t.curIndex++,d=t.videoDataList[t.curIndex]),s.log("nextVideo"+d),null!==d?i.updateMedia(d,!0):(s.log("showRecommend 11"),i.showRecommend())}},800)}))},e.exports=o});