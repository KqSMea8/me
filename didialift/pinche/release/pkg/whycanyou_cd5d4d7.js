define("page/whycanyou/button/button.js",function(){});
;define("page/whycanyou/login/login.js",function(n,o,e){var i=n("tool/tool.js"),l=Zepto(".layer_login"),t=l.find.bind(l);t.__proto__=Zepto;var a,r,d=t("#phone_input"),u=t(".login_confire_btn"),c=t(".lagin_layer_close"),h=i.parseEqual(location.search.slice(1)).channel;o=e.exports=function(n){return r=n,e.exports},o.show=function(n,o){"function"==typeof n&&(o=n,n=null),n&&t(".login_title").html(n),a=o,l.show()},l.on("touchmove",function(n){n.preventDefault()}),u.on("click",function(){return null==i.regular.is_phone_number(d.val().trim())?(l.hide(),void dd.dialog.alert({tip:"请输入正确的手机号码",btn:{val:"确定",handler:function(){l.show()}}})):(dd.dialog.loading("正在提交",5e3),void t.ajax({type:"POST",url:r,data:{phone:d.val(),channel:h},timeout:"5000",success:function(n){var o=JSON.parse(n);0==o.errno?(dd.dialog.loading("正在提交",0),a(),l.hide()):dd.dialog.alert(o.errmsg)},error:function(){l.hide(),dd.dialog.alert({tip:"网络请求失败,请稍后重试",btn:{val:"确定",handler:function(){l.show()}}})}}))}),c.on("click",function(n){d.blur(),l.hide(),n.preventDefault()})});
;define("page/whycanyou/first/first.js",function(e,a){function t(){var e=a.check_filed();e!==!1&&(e=$.extend({},pageParams.upload_data,e),window.dd.dialog.loading("正在提交",5e3),$.ajax({type:"POST",url:pageParams.submit_url,data:e,success:function(e){var a;try{if(a=JSON.parse(e),0!=a.errno)return"101"==a.errno&&setTimeout(function(){location.replace(pageParams.homeurl)},2e3),dd.dialog.alert(a.errmsg);var t=a.data.shareinfo.link;if(t=t.replace(new RegExp("^"+location.protocol+"\\/\\/"+location.host),""),window.history.pushState){window.history.pushState({},document.title,t);var o=$.extend({step:2},a.data);n(o)}else location.href=t}catch(r){return dd.dialog.alert("网络有点不给力，请稍后再试哦~")}dd.dialog.loading("正在提交",0)},error:function(){dd.dialog.alert("网络有点不给力，请稍后再试哦~")}}))}var n,o=e("page/whycanyou/login/login.js")(pageParams.loginurl),r=a.$container=$(".first");a.wakeup=function(e,a){n=a};var i=[["人人能当堵侠，不做闪电侠","全民顺风，挑战早晚高峰"],["下班六点，到家九点","全民顺风，挑战早晚高峰"],["线上越来越快，路上越来越慢","全民顺风，挑战早晚高峰"]],l=i[Math.round(Math.random()*(i.length-1))],c={username:{alert:"请填写你的大名",placeholder:"滴滴小伙伴"},whycontent:{alert:"请填写你的第一句倡议",placeholder:l[0]},cancontent:{alert:"请填写你的第二句倡议",placeholder:l[1]}},u=["username","whycontent","cancontent"];u.forEach(function(e){$("#"+e).val(c[e].placeholder).one("touchstart",function(){this.value=""})}),a.check_filed=function(){for(var e,a={},t=0,n=u;e=n[t++];){var o=$("#"+e).val().trim();if((""==o||o==c.username.placeholder)&&1==t)return dd.dialog.alert({title:"",tip:c[e].alert,btn:{handler:function(){$("#"+e).focus()}}}),!1;a[e]=o}return a},$(["#"+u[1],"#"+u[2]].join(",")).on("blur",function(){this.nextElementSibling.style.opacity=this.value.trim()?"1":"0"}),$("#"+u[0]).on("blur",function(){this.value=this.value.replace(/([\u4E00-\u9FA5|\w]{5})(.+)/,"$1")}),r.find(".btn-common").on("click",function(){0==pageParams.islogin?o.show(function(){t()}):t()})});
;define("page/whycanyou/second/second.js",function(n,e){var i,o,t=e.$container=$(".second");e.wakeup=function(n,e,t){i=e,o=t;{var a=$(".user_sum");a.offset()}a.css({}),console.log(n),$(function(){window.initWxShare(n.shareinfo||pageParams.shareinfo)})},e.wakeup_before=function(n){n.username,e.sync_view(n)},e.sync_view=function(n){var e="data-bindkey";$("["+e+"]").each(function(i,o){var t=o.getAttribute(e).trim();t in n&&(o.firstElementChild&&"IMG"===o.firstElementChild.tagName?o.firstElementChild.src=n[t]:o.innerHTML=n[t])}),2==n.step?($(".btn_box_third").hide(),$(".btn_box_second").show()):($(".btn_box_third").show(),$(".btn_box_second").hide())},t.find(".btn-join").on("click",function(){3==pageParams.step&&(location.href=pageParams.homeurl)}),t.find(".btn-upload").on("click",function(){o()})});
;define("page/whycanyou/main.js",function(e,a){function t(e,a,t,n){var i=$(".container");return e[0]==a[0]?(a.show(),n&&n(),void t()):(e.addClass("from_page"),a.addClass("to_page"),i.attr("class","main animate begin_animate"),n&&n(),setTimeout(function(){i.attr("class","main animate end_animate")},0),void setTimeout(function(){e.removeClass("from_page").hide(),a.removeClass("to_page").show(),t()},350))}function n(e,a){return void 0===a&&(a=e.getAttribute("data-offset")),a=a.split(/\s*,\s*/),{x:a[0],y:a[1],w:a[2],h:a[3]}}var i,o,s,r=e("page/whycanyou/first/first.js"),c=e("page/whycanyou/second/second.js"),u=[r,c],f=n($(".bg")[0]),h=$(".main"),d=Math.min(Math.max(pageParams.step-1,0),u.length-1)||0,p=function(e,a){o=function(t){t=$.extend({},a,t),e<u.length-1?p(e+1,t):e===u.length-1&&location.replace(pageParams.successurl)},s=function(t){t=$.extend({},a,t),e>0&&p(e-1,t)},t(h.eq(d),h.eq(e),function(){u[e].wakeup(a||{},o,s),i=location.href},function(){u[e].wakeup_before&&u[e].wakeup_before(a||{},o,s)}),d=e};addEventListener("hashchange",function(){location.href===i&&s()}),a.update=function(){$("div[data-offset]").each(function(e,a){var t=n(a),i=innerWidth,o=i/f.x,s=f.y*o,r=s*t.y/f.y,c=i*t.x/f.x,u=["left:"+c+"px","top:"+r+"px","display: block"];if(t.w){var h=s*t.w/f.y;u[u.length]=["width:"+h+"px"]}if(t.h){var d=i*t.h/f.x;u[u.length]=["height:"+d+"px"]}a.style.cssText=u.join(";")})},$(function(){window.initWxShare(pageParams.shareinfo)});var l;$(window).on("resize",function(){clearTimeout(l),l=setTimeout(a.update,100)}),h.hide(),a.update(),p(d,{step:pageParams.step})});